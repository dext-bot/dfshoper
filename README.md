# 游戏商城低价商品助手

这是一个面向 Windows 的自动化工具，用于帮助玩家在游戏交易行中自动识别低价商品并执行快速购买。所有图像识别任务都依赖 GPU 加速的 EasyOCR 引擎，以保证识别速度。

## 功能概述

* **配置文件管理**：启动时自动读取 `config/config.json`，保存交易按钮、界面按钮、价格识别区域等坐标。若不存在会自动创建。用户可以在 UI 中重新录入坐标。
* **模式 1（扫货模式）**：
  * 在 UI 中为每个目标商品设置屏幕坐标、最低扫货价格与识别延迟。
  * 自动依次点击配置好的商品，等待指定延迟并通过 GPU OCR 识别价格 1 和价格 2。
  * 当价格低于设定阈值时自动点击“最大数量”与“购买”按钮。
* **模式 2（录制模式）**：
  * 通过拖拽录入价格识别区域与终止检测坐标。
  * 支持录制两段操作流程（操作 1、操作 2），按下 `ESC` 结束录制。
  * 当识别到的价格高于阈值执行操作 1，低于阈值执行操作 2，并根据指定坐标的像素颜色判断是否停止循环。
* **日志面板**：实时显示自动化执行状态与价格识别结果。

## 环境依赖

请先在安装了显卡驱动与 CUDA 的 Windows 机器上部署，确保 PyTorch / EasyOCR 可以使用 GPU。

```bash
pip install -r requirements.txt
```

> **注意**：首次运行 EasyOCR 会下载模型文件，请保持网络连接。

## 启动

```bash
python -m app.main
```

## 使用提示

1. 启动程序后先在“全局设置”中录入交易按钮、价格识别区域等坐标。
2. 若配置文件为空，程序会在几秒后弹出全屏截图向导，依次点击各个关键位置完成初始化；也可以随时通过“选取”按钮重新采集坐标。
3. 在“模式 1”页签中新增商品，录入最低价格及识别延迟。
4. 在“模式 2”页签中录制操作 1/2，设置终止检测颜色。
5. 使用工具栏按钮启动或停止对应模式。

## GPU OCR

`app/ocr.py` 中的 `easyocr.Reader` 以 `gpu=True` 初始化，若环境未正确安装 GPU 相关依赖会抛出异常并提示用户。

## 免责声明

请在遵守游戏服务条款及相关法律的前提下使用本工具。作者不对因使用本工具导致的任何后果负责。
